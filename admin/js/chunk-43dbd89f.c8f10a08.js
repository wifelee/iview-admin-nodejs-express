(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43dbd89f"],{"0d40":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-wrapper"},[a("div",{staticClass:"filter-wrapper"},[a("Input",{staticStyle:{margin:"0 20px",width:"200px"},attrs:{placeholder:"角色"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"ios-search"},on:{click:e.loadData}},[e._v("搜索")]),a("Button",{on:{click:e.onClear}},[e._v("重置")])],1),a("Divider"),a("Button",{attrs:{type:"primary"},on:{click:e.addNewManger}},[e._v("新增角色")]),a("div",{staticClass:"table",staticStyle:{"margin-top":"20px"}},[a("Table",{ref:"selection",attrs:{border:"",columns:e.columns4,data:e.data1}})],1),a("div",{staticClass:"page"},[a("Page",{attrs:{total:e.total,current:e.current},on:{"on-change":e.changePage}})],1),a("Modal",{attrs:{title:"角色信息维护"},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"角色名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"角色权限",prop:"access"}},[a("CheckboxGroup",{model:{value:e.formValidate.access,callback:function(t){e.$set(e.formValidate,"access",t)},expression:"formValidate.access"}},[a("div",[e._v("项目设置")]),a("Checkbox",{attrs:{label:"01"}},[a("span",[e._v("科室项目设置")])]),a("Checkbox",{attrs:{label:"02"}},[a("span",[e._v("扣分项目设置")])]),a("div",[e._v("评分数据")]),a("Checkbox",{attrs:{label:"03"}},[a("span",[e._v("全院现场反馈表")])]),a("Checkbox",{attrs:{label:"04"}},[a("span",[e._v("全院评分排名")])]),a("Checkbox",{attrs:{label:"05"}},[a("span",[e._v("黄红牌管理")])]),a("Checkbox",{attrs:{label:"06"}},[a("span",[e._v("6s星极评定")])]),a("div",[e._v("项目设置")]),a("Checkbox",{attrs:{label:"07"}},[a("span",[e._v("角色管理")])]),a("Checkbox",{attrs:{label:"08"}},[a("span",[e._v("用户管理")])])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large"},on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:e.ok}},[e._v("提交")])],1)],1)],1)},n=[],s=(a("7f7f"),a("96cf"),a("3b8d")),i=a("7e1e"),c=a("90de"),o={name:"manager-page",data:function(){var e=this;return{name:"",modal1:!1,mobileValue:"",model4:"",current:1,total:0,statusList:["待付款","已发货","已完成"],columns4:[{title:"序号",type:"index",width:100,align:"center"},{title:"角色名称",key:"name"},{title:"角色权限",key:"access",render:function(e,t){var a=["primary","success","error","warning"],r={"01":"科室项目设置","02":"扣分项目设置","03":"全院现场反馈表","04":"全院评分排名","05":"黄红牌管理","06":"6s星极评定","07":"角色管理","08":"用户管理"},n=t.row.access.map((function(t,n){return e("Tag",{attrs:{color:a[n]}},r[t])}));return e("div",n)}},{title:"编辑时间",key:"created_at",render:function(e,t){return e("div",Object(c["b"])(t.row.created_at,"year"))}},{title:"操作",render:function(t,a){var r=e;return t("div",[t("a",{style:{marginRight:"10px"},on:{click:function(){r.delAdmin(a.row._id,a.index)}}},"删除"),t("a",{on:{click:function(){r.editAdmin(a.index)}}},"编辑")])}}],data1:[],formValidate:{name:"",access:[]},ruleValidate:{role:[{required:!0,message:"角色不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],real_name:[{required:!1,message:"真实姓名不能为空",trigger:"blur"}],access:[{type:"array",required:!0,message:"权限不能为空",trigger:"change"}]}}},watch:{modal1:function(e){e||(this.formValidate.id="")}},mounted:function(){this.loadData()},methods:{onClear:function(){this.name="",this.loadData()},changePage:function(e){this.current=e,this.loadData()},loadData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["o"])({p:this.current-1,name:this.name});case 2:t=e.sent,this.total=t.data.count,this.data1=t.data.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addNewManger:function(){this.modal1=!this.modal1},delAdmin:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["g"])({id:t});case 2:r=e.sent,200===r.status?(this.data1.splice(a,1),this.$Message.success(r.data.message)):this.$Message.error(r.data.message);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),editAdmin:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.formValidate.id=this.data1[t]._id,this.modal1=!this.modal1;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),ok:function(){var e=this;this.$refs["formValidate"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}return t.next=3,Object(i["d"])(e.formValidate);case 3:if(r=t.sent,200!=r.status){t.next=11;break}return e.$Message.success("提交成功!"),t.next=8,e.loadData();case 8:e.modal1=!1,t.next=12;break;case 11:e.$Message.error(r.data.message);case 12:t.next=15;break;case 14:e.$Message.error("请填完整信息!");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancel:function(){this.modal1=!this.modal1}}},l=o,d=(a("2726"),a("2877")),u=Object(d["a"])(l,r,n,!1,null,"6ea57a8f",null);t["default"]=u.exports},2726:function(e,t,a){"use strict";a("d51bc")},d51bc:function(e,t,a){}}]);